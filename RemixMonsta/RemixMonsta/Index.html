<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Remixmonsta</title>
    <link href="Style/bootstrap.css" rel="stylesheet">
    <link href="Style/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="Scripts/moment.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="https://connect.soundcloud.com/sdk/sdk-3.1.2.js"></script>
    <script src="Scripts/PlayerScript.js"></script>

    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand logo" href="#">
                    <img alt="Remixmonsta" src="Images/remixmonsta_logo.svg">
                </a>

                <form class="navbar-form navbar-left ">
                    <div class="input-group ">
                        <span class="input-group-addon search-icon" style="width: 20px">  <img alt="Remixmonsta" src="Images/searchIcon.svg" width="17" height="17"></span>
                        <input type="text" class="form-control searchBox" placeholder="Search" aria-describedby="sizing-addon2">

                    </div>
                </form>
                  <div class="back_to_main">
                    Back to main Page
                </div>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="../navbar/"><img class="twitter" alt="tweeter" src="Images/twitter.svg"></a></li>

                    <li><a href="../navbar-static-top/">ABOUT</a></li>
                    <li><a href="./"> PRIVACY POLICY</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-lg-9 col-md-7 main-body">
                <div class="main_container">
                    <div class="headline-area">
                        <h1 class="headline">Choose your favorite genres, and start hunting for best remixes</h1>
                    </div>
                    <div class="genreList">
                        <span class="genre ">Top 25</span>
                        <span class="genre ">Ambient</span>
                        <span class="genre ">Dance &amp; EDM </span>
                        <span class="genre ">Deep House </span>
                        <span class="genre ">Drum & Bass</span>
                    </div>
                    <div class="genreList">
                        <span class="genre">Dubstep</span>
                        <span class="genre ">Electronic </span>
                        <span class="genre selected-genre">House </span>
                        <span class="genre ">Pop </span>
                        <span class="genre ">Reggae </span>
                        <span class="genre ">Reggaeton</span>
                        <span class="genre ">Techno</span>
                        <span class="genre ">Trap </span>
                    </div>

                    <div class="row information">
                        <div class="col-lg-1 col-md-7 song-numbe">
                            #
                        </div>
                        <div class="col-lg-6 col-md-7">
                            Track<span class="trackList-status">List refreshed <span id="refresh_time">0</span> hours ago</span>
                        </div>
                        <div class="col-lg-5 col-md-7 play-count">
                            Plays this week / all time
                        </div>

                    </div>
                </div>
                <div class="trackList">


                </div>

                <div class="search_result">
                </div>
                <div class="back_to_main">
                    Back to main Page
                </div>

            </div>

            <div class="col-lg-3 col-md-3 side-bar">
                <div class="affix">
                    <div class="playlist">
                        <h1 class="playlist-title">Your playlist</h1>
                        <div class="playlist-info">
                            <span class="playlist-count">8</span> tracks added | <span class="playlist-time">34</span> mins in total
                        </div>
                        <div class="shuffle-big">
                            SHUFFLE PLAY
                        </div>

                        <div class="playlist-songs">
                        </div>

                        <div class="subscribe">
                            <div class="title">
                                Don't miss out newest feature  and announcement from us!
                            </div>
                            <input class="email" type="email" placeholder="Enter you email address " />
                            <button class="submit">SIGN UP , YAAAY!</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <div class="navbar navbar-default navbar-fixed-bottom footer">
        <span class="song-timeline_big"><span class="timeline_big"></span></span>
        <div class="container">
            <div class="navbar-text pull-left">
                <img src="" width="48" height="48" class="album-cover" />
                <span class="song-title">Select a a track from playlist, and enjoy</span>
                <span class="song-timeline"><span class="timeline"></span></span>
                <span class="song-timer text"><span class="current-time">0:00 </span> / <span class="total-time">0:00</span></span>
                <span class="controlls">
                    <span class="volume_area">
                        <img class="volume" alt="Volume" src="Images/volum-control.svg"><span class="volume-line"><span class="track_volume"></span></span>
                    </span>
                    <img class="prev_song" alt="previous" src="Images/last-song.svg">
                    <img class="play_song" alt="play" src="Images/play.svg">
                    <img class="next_song" alt="next" src="Images/next-song.svg">
                    <img class="random_song" alt="random" src="Images/random_play.svg">
                </span>
            </div>
        </div>
    </div>
    <script>
        var id;
        $(".controlls .volume").click(function (e) {
            clearTimeout(id);
           $('.volume-line').toggle("volume_visible");
           id = setTimeout("$('.volume-line').hide();", 5000);
          
        });




        $(".controlls .prev_song").click(function (e) {
            playPrevSong();

        });
        $(".controlls .play_song").click(function (e) {

            if (player != null) {

                if (player.isPlaying()) {

                    player.pause();
                } else {
                    player.play();
                }
            }

        });
        $(".controlls .next_song").click(function (e) {
            playNextSong();

        });
        $(".controlls .random_song").click(function (e) {
            if (isPlaylist) {
                toggleRandomPlayList();
            } else {
                toggleRandomTracks();
            }

        });

        $(document).on('click', '.shuffle-big ', function () {
            toggleRandomPlayList();
        });

        $(".genreList .genre").click(function (e) {
            $(this).toggleClass("selected-genre");
            updateTrackList();

        });

        function updateTrackList() {
            $('.trackList').text("");
            trackList = [];
            $(".genreList .selected-genre").each(function () {
                getTrack($(this).text().trim(), DEFAULT_PAGE_SIZE);

            });
        }


        setInterval(function () {
            updateTrackList();
            $('#refresh_time').text("0");

        }, 1000 * 60 * 60 * 3);

        setInterval(function () {
            var then = moment.utc(listRefreshTime);
            var now = moment.utc(new Date().getTime());
            $('#refresh_time').text(Math.floor(moment.duration(now.diff(then)).asHours()));
        }, 1000);


        $(document).on('click', '.add-playlist', function () {
            var index = $(this).parent().find('.song-number').text();
            var track;
            if (isSearch) {
                track = searchList[index - 1];
            } else {
                track = trackList[index - 1];
            }
            var result = checkIfTrackAlreadyInPlayList(track);
            if (result) {
                removeFromPlayList(track);
            } else {
                addToPlayList(track);
            }

        });

        $(document).on('click', '.playlist-songs .genre', function () {
            var classString = $(this).parent().parent().attr('class');
            var id = classString.substring(16);
            var track = getTrackFromPlayListByid(id);
            if (track != null) {
                removeFromPlayList(track);
            }
        });



        $(document).on('click', '.trackList .album-cover', function () {
            var index = $(this).parent().parent().find('.song-number').text();
            $(this).find('.genre').toggleClass("selected-genre");
            var track = trackList[index - 1];
            isPlaylist = false;
            isSearch = false;
            playSong(track);

        });

        $(document).on('click', '.search_result .album-cover', function () {
            var index = $(this).parent().parent().find('.song-number').text();
            var track = searchList[index - 1];
            isPlaylist = false;
            isSearch = true;;
            playSong(track, false);

        });

        $(document).on('click', '.playlist-songs .album-covers', function () {
            var classString = $(this).parent().attr('class');
            var id = classString.substring(16);
            var track = getTrackFromPlayListByid(id);
            isPlaylist = true;
            isSearch = false;;
            playSong(track);

        });


        $(document).on('click', '.shuffle-big', function () {

            if (isRandomPlayList) {
                isRandomPlayList = false;
            } else {
                isRandomPlayList = true;
            }

        });
        $(document).on('keyup', '.searchBox', function () {
            isSearch = true;
            var val = $(this).val();
            getTrackForSearchResult(val);
            $(".main_container").css("display", "none");
            $(".trackList").css("display", "none");
            $(".search_result").css("display", "block");
            $(".back_to_main").css("display", "inline-block");


        });

        $(document).on('click', '.back_to_main', function () {
            isSearch = false;
            $(".search_result").css("display", "none");
            $(".back_to_main").css("display", "none");
            $(".main_container").css("display", "block");
            $(".trackList").css("display", "block");
            $('.searchBox').val("");

        });


        $(document).ready(function () {
            loadPlayList();
        });

    </script>
</body>
</html>